Description: Ensure that we only show plymouth when splash option is provided
 Consequently (with debian and ubuntu's patch), plymouth is only triggered if:
 - plymouth.enable=0 isn't set
 - nosplash isn't set
 - we set splash (like on desktop flavors) on the kernel cmdline
Author: Didier Roche <didrocks@ubuntu.com>
Forwarded: not-needed

---
 systemd-units/plymouth-halt.service.in                 |    1 +
 systemd-units/plymouth-kexec.service.in                |    1 +
 systemd-units/plymouth-poweroff.service.in             |    1 +
 systemd-units/plymouth-reboot.service.in               |    1 +
 systemd-units/plymouth-start.service.in                |    1 +
 systemd-units/systemd-ask-password-plymouth.path.in    |    1 +
 systemd-units/systemd-ask-password-plymouth.service.in |    1 +
 7 files changed, 7 insertions(+)

Index: b/systemd-units/plymouth-halt.service.in
===================================================================
--- a/systemd-units/plymouth-halt.service.in
+++ b/systemd-units/plymouth-halt.service.in
@@ -5,6 +5,7 @@ Before=systemd-halt.service
 DefaultDependencies=no
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionVirtualization=!container
 
 [Service]
Index: b/systemd-units/plymouth-kexec.service.in
===================================================================
--- a/systemd-units/plymouth-kexec.service.in
+++ b/systemd-units/plymouth-kexec.service.in
@@ -5,6 +5,7 @@ Before=systemd-kexec.service
 DefaultDependencies=no
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionVirtualization=!container
 
 [Service]
Index: b/systemd-units/plymouth-poweroff.service.in
===================================================================
--- a/systemd-units/plymouth-poweroff.service.in
+++ b/systemd-units/plymouth-poweroff.service.in
@@ -5,6 +5,7 @@ Before=systemd-poweroff.service
 DefaultDependencies=no
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionVirtualization=!container
 
 [Service]
Index: b/systemd-units/plymouth-reboot.service.in
===================================================================
--- a/systemd-units/plymouth-reboot.service.in
+++ b/systemd-units/plymouth-reboot.service.in
@@ -5,6 +5,7 @@ Before=systemd-reboot.service
 DefaultDependencies=no
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionVirtualization=!container
 
 [Service]
Index: b/systemd-units/plymouth-start.service.in
===================================================================
--- a/systemd-units/plymouth-start.service.in
+++ b/systemd-units/plymouth-start.service.in
@@ -6,6 +6,7 @@ After=systemd-udev-trigger.service syste
 Before=systemd-ask-password-plymouth.service
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionVirtualization=!container
 
 [Service]
Index: b/systemd-units/systemd-ask-password-plymouth.path.in
===================================================================
--- a/systemd-units/systemd-ask-password-plymouth.path.in
+++ b/systemd-units/systemd-ask-password-plymouth.path.in
@@ -7,6 +7,7 @@ After=plymouth-start.service
 Before=basic.target shutdown.target
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionPathExists=/run/plymouth/pid
 
 [Path]
Index: b/systemd-units/systemd-ask-password-plymouth.service.in
===================================================================
--- a/systemd-units/systemd-ask-password-plymouth.service.in
+++ b/systemd-units/systemd-ask-password-plymouth.service.in
@@ -7,6 +7,7 @@ After=plymouth-start.service
 Before=shutdown.target
 ConditionKernelCommandLine=!plymouth.enable=0
 ConditionKernelCommandLine=!nosplash
+ConditionKernelCommandLine=splash
 ConditionVirtualization=!container
 ConditionPathExists=/run/plymouth/pid
 
